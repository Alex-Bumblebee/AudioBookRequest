{% extends "base.html" %} {% block head %}
<title>Wishlist</title>
{% endblock %} {% block body %}

<div class="w-screen p-2 md:p-4 lg:p-8 gap-2">
  <h1 class="text-3xl font-bold">Wishlist</h1>
  <div class="overflow-x-auto h-[80vh] border-b pb-2 border-b-base-200">
    <table class="table table-pin-rows min-w-[60rem]">
      <thead>
        <tr>
          <th></th>
          <th></th>
          <th>Title</th>
          <th>Author</th>
          <th>Narrator</th>
          <th>Release</th>
          <th>Length (hrs)</th>
          <th># Requested</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for book in books %}
        <tr class="text-xs lg:text-sm" id="{{ book.asin }}">
          <th>{{ loop.index }}</th>
          <td>
            <div class="size-[4rem] lg:size-[6rem]">
              {% if book.cover_image %}
              <img
                class="object-cover w-full h-full"
                src="{{ book.cover_image }}"
                alt="{{ book.title }}"
              />
              {% else %}
              <div
                class="flex items-center justify-center w-full h-full bg-neutral text-neutral-content opacity-30"
              >
                {% include 'icons/photo-off.html' %}
              </div>
              {% endif %}
            </div>
          </td>

          <td>
            <div class="flex flex-col">
              <a
                href="/search?q={{ (book.title+' ' +(book.authors|join(',')))|quote_plus }}"
                class="font-bold text-primary line-clamp-4"
                title="{{ book.title }}"
                >{{ book.title }}</a
              >
              {% if book.subtitle %}
              <span
                class="font-semibold line-clamp-4"
                title="{{ book.subtitle }}"
                >{{ book.subtitle }}</span
              >
              {% endif %}
            </div>
          </td>

          <td>{{ book.authors|join(', ') }}</td>
          <td>{{ book.narrators|join(', ') }}</td>
          <td class="hidden lg:table-cell">
            {{ book.release_date.strftime("%B %Y") }}
          </td>
          <td class="lg:hidden">{{ book.release_date.strftime("%Y") }}</td>
          <td>{{ book.runtime_length_hrs }}</td>
          <td>{{ book.amount_requested }}</td>

          <td class="grid grid-cols-2 min-w-[8rem] gap-1">
            {% if is_admin %}
            <a
              title="Go to sources"
              href="/wishlist/sources/{{ book.asin|quote_plus }}"
              class="btn btn-square"
              >{% include 'icons/list.html' %}</a
            >
            <button title="Automatic Download" class="btn btn-square" disabled>
              {% include 'icons/download.html' %}
            </button>
            <button title="Reject" class="btn btn-square" disabled>
              {% include 'icons/ban.html' %}
            </button>
            {% endif %}
            <button class="btn btn-square" disabled>
              {% include 'icons/checkmark.html' %}
            </button>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
